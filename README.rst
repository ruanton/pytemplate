myproj
======

Scaffolding from this template (remove this section afterwards)
---------------------------------------------------------------

Note: this template is generated by Cookiecutter 2.0.2 and modified by me.

- Search and replace name stubs in all config files, directory and file names.

    - myproj
    - myscript
    - my_view
    - mytemplate
    - author_name
    - author_email
    - AppRootModel

- Edit configuration in ``pyproject.toml``, ``*.ini``, ``requirements.txt`` and ``requirements-*.txt``.

    - classifiers
    - dependencies
    - optional-dependencies

- Set initial version number in ``VERSION`` and ``CHANGES.rst`` files.

Getting Started
---------------

- Change directory into this project if not already there. Your
  current directory should be the same as this ``README.rst`` file and ``pyproject.toml``.
  Create a Python virtual environment, if not already created::

    python3 -m venv env

- Upgrade packaging tools::

    ./venv/bin/pip install --upgrade pip setuptools build

- Install and update libraries::

    ./venv/bin/pip install -U -r requirements.txt
    ./venv/bin/pip install -U -r requirements-*.txt

- Install the project in editable mode::

    ./venv/bin/pip install -e .

  or::

    ./venv/bin/pip install -e ".[testing]"

- Create directories for ZODB and logs if it does't already exist::

    mkdir zodb-data
    mkdir logs

- Create configuration files from samples::

    cp config/samples/myscript.ini.sample config/myscript.ini
    cp config/samples/websrv.ini.sample config/websrv.ini
    cp config/samples/websrv-dev.ini.sample config/websrv-dev.ini
    cp config/samples/testing.ini.sample config/testing.ini

- Run project's tests::

    ./venv/bin/pytest
    ./venv/bin/pytest --cov --cov-report=term-missing

- Run project's custom console script::

    ./venv/bin/myscript config/myscript.ini

- Run project's webserver::

    ./venv/bin/pserve config/websrv.ini

  or::

    ./venv/bin/pserve config/websrv-dev.ini --reload

- Example bash command to run via cron::

    ps aux | grep -v grep | grep -q myscript.ini || /root/myproj/venv/bin/myscript /root/myproj/config/myscript.ini >/dev/null 2>&1 &

